---

title: core.data


keywords: fastai
sidebar: home_sidebar

summary: "Supplies dashboards and dashboard components. Dashboards are defined as classes, to show the dashboard use the .show() function on an dashboard instance."
description: "Supplies dashboards and dashboard components. Dashboards are defined as classes, to show the dashboard use the .show() function on an dashboard instance."
nb_path: "nbs/core.data.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/core.data.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Observable" class="doc_header"><code>class</code> <code>Observable</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/core/data.py#L12" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Observable</code>() :: <code>ABC</code></p>
</blockquote>
<p>Simple implementation of the observer pattern.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Implements basic observer pattern, with a register and trigger function.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ObservableList" class="doc_header"><code>class</code> <code>ObservableList</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/core/data.py#L25" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ObservableList</code>(<strong><code>observable_list</code></strong>:<code>list</code>) :: <a href="/icevision_dashboards/core.data.html#Observable"><code>Observable</code></a></p>
</blockquote>
<p>List with observer pattern</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Implements a list with the observer patter. If the list changes all registered callbacks will be executed.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DatasetDescriptor" class="doc_header"><code>class</code> <code>DatasetDescriptor</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/core/data.py#L94" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DatasetDescriptor</code>() :: <code>ABC</code></p>
</blockquote>
<p>Helper class that provides a standard way to create an ABC using
inheritance.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Abstaract base class for dashboards. Inherited classes are required to implement a <code>build_gui</code> function, that builds the gui to be shown as well as setting up interactions and a <code>show</code> function that returns the gui. The <code>build_gui</code> function is called at the end of the <code>__init__</code> function. Most dashboards require different descriptors from the dataset (data, stats usw.). For simple handling of cases where the name is different (a vision dataset might have stats for the images, the annotations and the annotation classes) most dashboards have class variables for the different descriptors, wich can be changed to use a new descriptor.</p>
<p>For complexer dashboards, that use other dashboards as components the same approche is used, where class varibales ar used to choose a implementation of a dashboard. With this, in some cases only certain parts need to be replaced and not everything.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="StringDescriptor" class="doc_header"><code>class</code> <code>StringDescriptor</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/core/data.py#L116" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>StringDescriptor</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Descriptor for strings. Mainly used for name and descrition of a dataset (see <a href="/icevision_dashboards/core.data.html#GenericDataset"><code>GenericDataset</code></a>).</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="GenericDataset" class="doc_header"><code>class</code> <code>GenericDataset</code><a href="https://github.com/fstroth/icevision_dashboards/tree/master/icevision_dashboards/core/data.py#L127" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>GenericDataset</code>(<strong><code>base_data</code></strong>, <strong><code>name</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>None</code></em>, <strong><code>description</code></strong>:<code>Optional</code>[<code>str</code>]=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Generic base class for datasets that implements the basic control mechanisms. The idea behind the controll mechanism is, that if changes to the underlying data are made the changes to the infered data
can be propagated without explicit calls after each change. To achive this information that is infered from the underlying data needs to be defined as a descriptor. The easiest way is to inherit from <a href="/icevision_dashboards/core.data.html#DatasetDescriptor"><code>DatasetDescriptor</code></a> and define the <code>calculate_description</code> method. To have the changes in the underlying data propagated the <code>reset_infered_data</code> function is provided. The <code>base_data</code> should be of a type that has the observer pattern implemented, then the <code>reset_infered_data</code> method can just be registered.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Example">Example<a class="anchor-link" href="#Example"> </a></h2><p>Here we create a descriptor that returns a dict with with name and desription of the dataset. Then we create a TestDataset class that uses the new descriptor.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">DatasetStatsDescriptor</span><span class="p">(</span><span class="n">DatasetDescriptor</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">calculate_description</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="n">obj</span><span class="o">.</span><span class="n">description</span><span class="p">,</span> <span class="s2">&quot;num_data_points&quot;</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">base_data</span><span class="p">)}</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">TestDataset</span><span class="p">(</span><span class="n">GenericDataset</span><span class="p">):</span>
    <span class="n">stats</span> <span class="o">=</span> <span class="n">DatasetStatsDescriptor</span><span class="p">()</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">ObservableList</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">])</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="n">description</span><span class="o">=</span><span class="s2">&quot;description&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stats</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># register the reset hook</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">base_data</span><span class="o">.</span><span class="n">register_callback</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">reset_infered_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_dataset</span> <span class="o">=</span> <span class="n">TestDataset</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Stats before update: &quot;</span><span class="p">,</span> <span class="n">test_dataset</span><span class="o">.</span><span class="n">stats</span><span class="p">)</span>
<span class="c1"># if we change the data the stats automatically update </span>
<span class="n">test_dataset</span><span class="o">.</span><span class="n">base_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Stats after update: &quot;</span><span class="p">,</span> <span class="n">test_dataset</span><span class="o">.</span><span class="n">stats</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Stats before update:  {&#39;name&#39;: &#39;name&#39;, &#39;description&#39;: &#39;description&#39;, &#39;num_data_points&#39;: 3}
Stats after update:  {&#39;name&#39;: &#39;name&#39;, &#39;description&#39;: &#39;description&#39;, &#39;num_data_points&#39;: 4}
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

